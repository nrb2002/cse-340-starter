<!-- EJS code block to contain a JavaScript if structure to determine if a "title" variable exists. If the variable exists, displays within an <h1> element.
-->
<% if (title) { %>
    <h1>
        <%= title %>
    </h1>
<% } else { res.redirect('/') } %>
    <!-- otherwise, redirect the response object to the default index route, to deliver the home view.-->

    <!-- Flash message (if any) -->
    <% if (messages && messages.length> 0) { %>
    <div class="flash-message">
        <% messages.forEach(function(message){ %>
            <p>
                <%= message %>
            </p>
            <% }) %>
    </div>
    <% } %>

    <!-- Registration form -->
    <form action="/account/register" method="POST" class="register-form" novalidate>
        <fieldset>
            <legend>Your Personal Info</legend>
    
            <div class="form-group">
                <label for="first_name">First Name</label>
                <input type="text" id="first_name" name="first_name" placeholder="Enter your first name" required
                    autocomplete="given-name" value="<%= locals.first_name ? first_name : '' %>">
            </div>
    
            <div class="form-group">
                <label for="last_name">Last Name</label>
                <input type="text" id="last_name" name="last_name" placeholder="Enter your last name" required
                    autocomplete="family-name" value="<%= locals.last_name ? last_name : '' %>">
            </div>
        </fieldset>
        <fieldset>
            <legend>Your Credentials</legend>
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" placeholder="you@example.com" required autocomplete="email"
                    value="<%= locals.email ? email : '' %>">
            </div>
    
            <div class="form-group password-field">
                <label for="password">Password</label>
                <div class="password-wrapper">
                    <input type="password" id="password" name="password" placeholder="Enter your password" required
                        aria-describedby="password-note">
                    <button type="button" id="togglePassword" aria-label="Toggle password visibility">
                        👁
                    </button>
                </div>
                <small id="password-note" class="password-note">
                    Must be at least 12 characters long and contain one uppercase letter, one number, and one special
                    character.
                </small>
            </div>
            <div class="form-group password-field">
                <label for="password">Confirm Password</label>
                <div class="password-wrapper">
                    <input type="password" id="password" name="password" placeholder="Enter your password" required
                        aria-describedby="password-note">
                    <button type="button" id="togglePassword" aria-label="Toggle password visibility">
                        👁
                    </button>
                </div>
            </div>
        </fieldset>
        
        <button type="submit" class="btn">Create Account</button>
    </form>

    <!-- Registration link -->
    <p class="form-footer">
        Already have an account?
        <a href="/account/login">Sign in</a>.
    </p>